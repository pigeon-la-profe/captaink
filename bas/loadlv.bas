1'MHIMEM (FC4AH)
2'https://konamiman.github.io/MSX2-Technical-Handbook/md/Chapter2.html#31-users-area
100tp%=0:POKE VAL("&H"+HEX$(VARPTR(tp%))),PEEK(&HFC4A):POKE VAL("&H"+HEX$(VARPTR(tp%)+1)),PEEK(&HFC4B):clear200,tp%:DEFINTA-Z
110tp=0:POKE VAL("&H"+HEX$(VARPTR(tp))),PEEK(&HFC4A):POKE VAL("&H"+HEX$(VARPTR(tp)+1)),PEEK(&HFC4B)
200le=PEEK(tp):pu=0:c2=PEEK(tp+77):DIMHI(14,3):km=0:kn=0:ks=0:ld=0:h4=0:ck=27:lk=0:pm=0:p1=0:p2=0:py=0:px=0:pz=0:ph=3:cs=8
210sc=le\40:IFsc<>c2THENsc$=RIGHT$(STR$(sc),LEN(STR$(sc))-1):VDP(1)=VDP(1)AND191:BLOAD"C"+sc$+".sc2",S:POKEtp+77,sc
300DIMPL(14,3):DIMC0(1,9):DIMC1(6,2):DIMM0(1,4):DIMM1(4,2):DIMR1(4,3):DIMC(101):ld=0
500OPEN"levels11.dat"AS#1LEN=4:FIELD #1,2 as b$:FORi=1to101:get#1,i+le*(101):C(i-1)=CVI(b$):NEXTi:CLOSE#1:GOSUB20000:GOSUB30000
510ERASEPL,C0,C1,M0,M1,R1,C:VDP(1)=VDP(1)OR64
520GOTO40000
20000_turboon(PL(),C0(),C1(),M0(),M1(),R1(),le,pu,C(),lk,km,kn,ks,ld,h4,ck,pm,p1,p2,py,px,pz,ph,cs)
20010ix=0:GOTO20100
20020v=C(ix):ix=ix+1:RETURN
20100FORI=0TO13:FORE=0TO2:GOSUB20020:PL(I,E)=v:NEXTE:NEXTI:FORE=0TO8:GOSUB20020:C0(0,E)=v:NEXTE:FORI=0TO5:FORE=0TO1:GOSUB20020:C1(I,E)=v:NEXTE:NEXTI:FORE=0TO3:GOSUB20020:M0(0,E)=v:NEXTE
20140FORI=0TO3:FORE=0TO1:GOSUB20020:M1(I,E)=v:NEXTE:NEXTI:FORI=0TO3:FORE=0TO2:GOSUB20020:R1(I,E)=v:NEXTE:NEXTI
20155GOSUB20020:km=v:GOSUB20020:kn=v:GOSUB20020:ks=v:GOSUB20020:ld=v:GOSUB20020:h4=v:GOSUB20020:ck=v:GOSUB20020:lk=v:GOSUB20020:pm=v:GOSUB20020:p1=v:GOSUB20020:p2=v:GOSUB20020:py=v:GOSUB20020:px=v:pz=py:GOSUB20020:ph=v:GOSUB20020:cs=v
20160_turbooff
20170RETURN
30000_turboon(PL(),C0(),C1(),M0(),M1(),R1(),le,HI(),lk,km,kn,ks,ld,h4,ck,pm)
30005FORI=0TO5:VPOKE6144+7+I+32*22,0:VPOKE6144+7+I+32*23,0:NEXTI:VPOKE6144+15+32*22,93:VPOKE6144+14+32*22,94:VPOKE6144+16+32*22,92
30600FORI=0TO20*32+31:VPOKE6144+I,ks:NEXTI:FORI=1TO14:n1=PL(I-1,0):n2=PL(I-1,1):n3=PL(I-1,2):HI(I-1,0)=n1:HI(I-1,1)=n2:HI(I-1,2)=n3:FORE=0TOn3-1:VPOKE6144+n1+1+E+32*n2,km+1:NEXTE:IFn3<>1THENVPOKE6144+n1+32*n2,km+3:VPOKE6144+n1+n3+1+32*n2,km+2
30620NEXTI:FORI=0TO5:t=0:n1=C1(I,0):n2=C1(I,1):FORE=0TO2:FORA=0TO2:VPOKE(6144+n1+A)+32*(n2+E),C0(0,t):t=t+1:NEXTA:NEXTE:NEXTI:FORI=0TO3:t=0:n1=M1(I,0):n2=M1(I,1):FORE=0TO1:FORA=0TO1:VPOKE(6144+n1+A)+32*(n2+E),M0(0,t):t=t+1:NEXTA:NEXTE:NEXTI
30640FORI=0TO7:VPOKE6144+12+32+I,73:NEXTI:FORI=0TO3:n1=R1(I,0):n2=R1(I,1):n3=R1(I,2):FORE=1TOn3:VPOKE6144+n1+32*n2+E-1,ld:NEXTE:NEXTI:FORI=1TO30:VPOKE6144+I+32*21,km+1:NEXTI:VPOKE6144+32*21,km+3:VPOKE6144+31+32*21,km+2
30800_turbooff
30810RETURN
30900POKE tp+X,PEEK(VARPTR(Y)):POKE tp+X+1,PEEK(VARPTR(Y)+1)
30950RETURN
40000'le,pu,HI(),lk,km,kn,ks,ld,h4,ck,pm,p1,p2,py,px,pz,ph,cs
40010 'X=0:Y=le:GOSUB30900'le
40020 'X=2:Y=pu:GOSUB30900'pu
40030 X=4:Y=lk:GOSUB30900'lk
40040 X=6:Y=km:GOSUB30900'km
40050 X=8:Y=kn:GOSUB30900'kn
40060 X=10:Y=ks:GOSUB30900'ks
40070 X=12:Y=ld:GOSUB30900'ld
40080 X=14:Y=h4:GOSUB30900'h4
40090 X=16:Y=ck:GOSUB30900'ck
41000 X=18:Y=pm:GOSUB30900'pm
41010 X=20:Y=p1:GOSUB30900'p1
41020 X=22:Y=p2:GOSUB30900'p2
41030 X=24:Y=py:GOSUB30900'py
41040 X=26:Y=px:GOSUB30900'px
41050 X=28:Y=pz:GOSUB30900'pz
41060 X=30:Y=ph:GOSUB30900'ph
41070 X=32:Y=cs:GOSUB30900'cs
41080 tq=34:FORI=0TO13:FORE=0TO2:POKE tp+tq,HI(I,E):tq=tq+1:NEXTE:NEXTI'HI
51080 load"captainc.bas",r
51090'load"captain1.bas",r


